#RHEL/CENTOS
#create group for sftp server/process
sudo groupadd sftpgroup
#create sftp user
sudo useradd sftp_user
#create password for sftp user
sudo passwd sftp_user
#add sftp user to the sftp group
sudo usermod -G group_id sftp_user
#usually you dont need to make any special changes for chroot directory. just give full access to the sftp user to its home directory
sudo chmod 700 /home/user
#if you need special location for its chroot directory
sudo mkdir -p /path_to_directory
sudo usermod -d /path_to_directory
sudo vi /etc/ssh/sshd_config
#attach at the end of the file
Match group sftpgroup
ChrootDirectory /path_to_directory
X11Forwarding no 
AllowTcpForwarding no 
ForceCommand internal-sftp

#change owner of chroot to root user
sudo chown root:root /path_to_directory
#restart ssh service
sudo systemctl restart sshd

sftp sftp_user@localhost
